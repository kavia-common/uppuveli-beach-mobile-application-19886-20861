{"is_source_file": true, "format": "Dart", "description": "This file defines a Flutter StatefulWidget page called LoyaltyPage, which displays user loyalty points, history, and allows simulation of a payment process. It interacts with external services LoyaltyService and PaymentsService to fetch loyalty data and process payments.", "external_files": ["package:flutter/material.dart", "package:MobileApplication/services/loyalty_service.dart", "package:MobileApplication/services/payments_service.dart"], "external_methods": ["LoyaltyService.instance.getLoyalty()", "PaymentsService.instance.processPayment({bookingId, amount, method})"], "published": ["LoyaltyPage", "LoyaltyPage.routeName"], "classes": [{"name": "LoyaltyPage", "description": "A StatefulWidget that displays loyalty points, activity history, and handles payments."}, {"name": "_LoyaltyPageState", "description": "State class for LoyaltyPage managing data fetching, user interactions, and UI updates."}, {"name": "_ErrorState", "description": "A StatelessWidget displaying error messages with retry option."}], "methods": [{"name": "initState", "description": "Initializes the state, fetching loyalty data at startup."}, {"name": "_refresh", "description": "Refreshes loyalty data by calling getLoyalty from LoyaltyService."}, {"name": "_simulatePayment", "description": "Simulates a payment process with placeholder values, updates state, and shows result or error."}, {"name": "build", "description": "Builds the widget tree, including the UI for loyalty points, history, and payment simulation."}], "calls": ["LoyaltyService.instance.getLoyalty()", "PaymentsService.instance.processPayment(bookingId: 1, amount: 10, method: 'stripe')", "ScaffoldMessenger.of(context).showSnackBar()", "Theme.of(context).colorScheme", "Theme.of(context).textTheme", "RefreshIndicator.adaptive", "ListView", "ListTile", "Icon", "Text", "Padding", "OutlinedButton.icon"], "search-terms": ["loyalty", "payment", "loyalty_page", "Flutter", "StatefulWidget", "Future", "points", "history", "simulate payment", "Stripe", "Payment processing"], "state": 2, "file_id": 15, "knowledge_revision": 45, "git_revision": "", "hash": "e126457aecc61a006f449dd4642069ba", "format-version": 4, "code-base-name": "MobileApplication", "filename": "MobileApplication/lib/pages/loyalty_page.dart", "revision_history": [{"45": ""}]}